<div class="col-md-9 mx-auto background shadow p-5 text-center mb-5">
  <p>（タイトル・本文は必須入力）</p>
<%= form_with model: post do |f| %>
  <div class="mb-3"><i class="fas fa-camera"></i> <%= f.label :images,"画像を選択する" ,  class: "form-label", for: "formFileMultiple"%></div>
  <%= f.file_field :images , multiple: true, class: 'form-control', id: "formFileMultiple"%>

  <% if post.images.attached? %>
    <p class="my-2">選択済みの画像（削除する画像にチェックをつけてください）</p>
    <div  class="d-flex flex-wrap">
    <% post.images.each do |image| %>
      <div class="d-flex m-2 ">
        <%= f.check_box :image_ids, { multiple: true }, image.id, false %>
        <label for="post_image_ids_<%= image.id %>" >
          <%= image_tag image, size: '200x200' %>
        </label>
      </div>
    <% end %>
    </div>
  <% end %>


  <div id="new-image"></div>
  <div class="my-3"><i class="fas fa-tag"></i> <%= f.label :title,"タイトル" %></div>
  <%= f.text_field :title, placeholder: "タイトルを入力", class: 'form-control' %><br>
  <div class="mb-3"><i class="far fa-file-alt"></i> <%= f.label :explaination,"本文 (#をつけるとタグになります）" %></div>
  <div><%= f.text_area :explaination, placeholder: "本文を入力 \r\n#タグ",:size=>"35x5", class: 'form-control' %></div>
  <div class="bg-white  border py-3 my-5">
    <p>＃をつけて投稿してみましょう。<br>最近の投稿では以下のようなタグ名で投稿されています!</p>
    <ul class="p-0">
      <% tags.each do |tag| %>
        <li class="btn btn-secondary mb-3 fwari">#<%= tag.name %></li>
      <% end%>
    </ul>
  </div>

   <!--Post.is_draftで、enumのハッシュ{"published"=>0, "draft"=>1}を取得する。keysで、キー(ハッシュの左側)を配列する。
   mapで、配列の要素に対して1つずつ処理する　|k|に先程のキーを代入　tは日本語化に対応するメソッド。-->
  <div class="form-group">
    <div class="mb-2"><i class="fas fa-pencil-alt"></i> <%= f.label :is_draft,"下書き/投稿" %></div>
    <%= f.select :is_draft, Post.is_drafts.keys.map { |k| [t("enums.post.is_draft.#{k}"),k]}, {}, {class: "custom-select w-50"} %>
    <%= f.submit submit, class: "btn btn-success w-25" %>
  </div>
  <div class="my-1">
    <% if @post.user == current_user %>
      <%= link_to '削除', post, method: :delete, data: {confirm: "投稿を削除します。よろしいですか？"},class: 'btn btn-danger w-25'%>
    <% end %>
  </div>

<% end %>
</div>


